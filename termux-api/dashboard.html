<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indrasevendev | Base Monitor</title>
    <style>
        :root {
            --base-blue: #0052ff; /* Warna khas Base */
            --bg-dark: #0a0a0a;
            --text-main: #ffffff;
            --text-dim: #888;
        }

        body { 
            background: var(--bg-dark); 
            color: var(--text-main); 
            font-family: 'Inter', -apple-system, sans-serif; 
            padding: 20px;
            margin: 0;
        }

        h1 { 
            color: var(--base-blue);
            font-size: 1.5rem;
            letter-spacing: -1px;
            border-left: 4px solid var(--base-blue);
            padding-left: 15px;
            margin-bottom: 30px;
        }

        .card { 
            background: #111;
            border: 1px solid #222;
            padding: 20px; 
            margin-bottom: 15px; 
            border-radius: 12px;
            transition: 0.3s;
        }

        .card:hover {
            border-color: var(--base-blue);
            box-shadow: 0 0 15px rgba(0, 82, 255, 0.2);
        }

        h3 { color: var(--text-dim); font-size: 0.8rem; text-transform: uppercase; margin-top: 0; }
        
        .value { 
            font-size: 1.2rem; 
            font-weight: bold; 
            color: var(--text-main);
            display: block;
            margin-top: 5px;
        }

        .status-dot {
            height: 10px; width: 10px;
            background-color: #00ff00;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            box-shadow: 0 0 8px #00ff00;
        }

        .base-logo { color: var(--base-blue); font-weight: 800; }
            #basename-display {
            text-shadow: 0 0 10px rgba(0, 82, 255, 0.3);
            background: linear-gradient(90deg, #0052ff, #5fffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        #basename-display {
            font-size: 1.2rem;
            font-weight: 800;
            background: linear-gradient(90deg, #0052ff, #5fffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 15px rgba(0, 82, 255, 0.2);
        letter-spacing: -0.5px;
        }

    </style>
</head>
<body>
    <h1><span class="base-logo">BASE</span> MONITOR</h1>
    
    <div class="card">
        <h3>üì± Device Status</h3>
        <span class="value" id="device">Syncing...</span>
        <small style="color: var(--text-dim)"><span class="status-dot"></span> System Live</small>
    </div>
   
    <div class="card">
    <h3>üîó Base Ecosystem</h3>
    <div style="margin: 15px 0;">
        <span id="basename-display" style="color: var(--base-blue); font-weight: 800; font-size: 1.1rem; display: block; letter-spacing: 0.5px;">
            indracryptoid.base.eth
        </span>
        <small id="eth-address" style="color: var(--text-dim); font-family: monospace; font-size: 0.75rem;">
            0xC9aC...4b80
        </small>
    </div>
    
    <div style="border-top: 1px solid #222; padding-top: 15px; margin-top: 10px;">
        <span class="value" id="balance">0.0000 ETH</span>
        <small style="color: var(--text-dim)">Current Balance</small>
    </div>

    <div class="card">
        <h3>üì¶ Latest Block</h3>
        <span class="value" id="block">#000000</span>
    </div>

    <div class="card">
    <h3>üõ†Ô∏è Command Center</h3>
    <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button onclick="sendCommand('vibrate')" style="background: var(--base-blue); color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; flex: 1;">üì≥ Vibrate</button>
        <button onclick="sendCommand('torch')" style="background: #333; color: white; border: 1px solid var(--base-blue); padding: 10px; border-radius: 8px; cursor: pointer; flex: 1;">üî¶ Toggle Torch</button>
    </div>

    <script>
        async function updateStats() {
            try {
                const res = await fetch('/api/status');
                const data = await res.json();
                
                // Update Baterai
                document.getElementById('device').innerText = `Battery: ${data.device.battery}`;
                
                if (data.blockchain && data.blockchain.success) {
                    document.getElementById('basename-display').innerText = data.blockchain.basename;
                    document.getElementById('balance').innerText = data.blockchain.balance + " ETH";
                    document.getElementById('block').innerText = "#" + data.blockchain.block;
                    
                    // Update Alamat terpotong
                    const addr = data.blockchain.address || "";
                    if(addr) {
                        document.getElementById('eth-address').innerText = `${addr.substring(0, 6)}...${addr.substring(addr.length - 4)}`;
                    }
                }
            } catch (e) {
                console.error("Gagal update stats:", e);
            }
        }

        async function sendCommand(type) {
            try {
                const res = await fetch(`/api/${type}`);
                const data = await res.json();
                console.log(`Command ${type} executed:`, data);
            } catch (e) {
                console.error("Gagal kirim perintah:", e);
            }
        }

        // Jalankan update setiap 5 detik
        setInterval(updateStats, 5000);
        // Jalankan sekali saat pertama kali buka
        updateStats();
    </script>
</body>
</html>

